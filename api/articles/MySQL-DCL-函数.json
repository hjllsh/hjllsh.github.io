{"title":"MySQL_DCL_函数","uid":"8f9e88b96addebc57d8b075bdae2d985","slug":"MySQL-DCL-函数","date":"2023-05-16T08:56:15.000Z","updated":"2023-05-18T02:45:07.908Z","comments":true,"path":"api/articles/MySQL-DCL-函数.json","keywords":null,"cover":[],"content":"<h2 id=\"DCL\"><a href=\"#DCL\" class=\"headerlink\" title=\"DCL\"></a>DCL</h2><p><strong>Data Control Language</strong>(数据控制语言)，用来管理数据库用户、控制数据库的访问权限。</p>\n<h5 id=\"管理用户\"><a href=\"#管理用户\" class=\"headerlink\" title=\"管理用户\"></a>管理用户</h5><p><strong>查询用户</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">select * from mysql.user;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"/assets/images/sql_user.png\" alt=\"sql_user\"></p>\n<p>其中 Host代表当前用户访问的主机, 如果为localhost, 仅代表只能够在当前本机访问，是不可以远程访问的。User代表的是访问该数据库的用户名。在MySQL中需要通过Host和User来唯一标识一个用户。</p>\n<p><strong>创建用户</strong></p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'密码'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong>修改用户密码</strong></p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机号'</span> IDENTIFIED <span class=\"token keyword\">WITH</span> mysql_native_password <span class=\"token keyword\">BY</span> <span class=\"token string\">'新密码'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong>删除用户</strong></p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">DROP</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>在MySQL中需要通过用户名@主机名的方式，来唯一标识一个用户。</p>\n<p>主机名可以使用 % 通配。</p>\n<p>这类SQL开发人员操作的比较少，主要是DBA（ Database Administrator 数据库管理员）使用。</p>\n<p><strong>权限控制</strong></p>\n<p>MySQL中定义了很多种权限，但是常用的就以下几种</p>\n<table>\n<thead>\n<tr>\n<th>权限</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ALL,  ALL PRIVILEGES</td>\n<td>所有权限</td>\n</tr>\n<tr>\n<td>SELECT</td>\n<td>查询数据</td>\n</tr>\n<tr>\n<td>INSERT</td>\n<td>插入数据</td>\n</tr>\n<tr>\n<td>UPDATE</td>\n<td>修改数据</td>\n</tr>\n<tr>\n<td>DELETE</td>\n<td>删除数据</td>\n</tr>\n<tr>\n<td>ALTER</td>\n<td>修改表</td>\n</tr>\n<tr>\n<td>DROP</td>\n<td>删除数据库&#x2F;表&#x2F;视图</td>\n</tr>\n<tr>\n<td>CREATE</td>\n<td>创建数据库&#x2F;表</td>\n</tr>\n</tbody></table>\n<p>查询权限</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> GRANTS <span class=\"token keyword\">FOR</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>授予权限</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">GRANT</span> 权限列表 <span class=\"token keyword\">ON</span> 数据库名<span class=\"token punctuation\">.</span>表名 <span class=\"token keyword\">TO</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>撤销权限</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">REVOKE</span> 权限列表 <span class=\"token keyword\">ON</span> 数据库名<span class=\"token punctuation\">.</span>表名 <span class=\"token keyword\">FROM</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p> 多个权限之间，使用逗号分隔</p>\n<p>授权时， 数据库名和表名可以使用 * 进行通配，代表所有。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> GRANTS <span class=\"token keyword\">FOR</span> <span class=\"token string\">'hj'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 运行结果：</span>\n<span class=\"token comment\">-- GRANT ALL PRIVILEGES ON `hj`.* TO `hj`@`%`</span>\n<span class=\"token comment\">-- 该命令为 MySQL 的授权语法，意思是授权用户 hj 在任何主机地址上（%）对数据库 hj 中所有表拥有所有权限（ALL PRIVILEGES）。可以执行如下 SQL 命令进行授权</span>\n<span class=\"token comment\">-- GRANT USAGE ON *.* TO `hj`@`%`</span>\n<span class=\"token comment\">-- 该命令为 MySQL 的授权语法，意思是授权用户 `hj` 在任何主机地址上（`%`）对所有的数据库、表、函数、存储过程等对象都拥有使用权限（`USAGE`）。</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h3><p>MySQL中的函数主要分为以下四类： 字符串函数、数值函数、日期函数、流程函数。</p>\n<p><strong>字符串函数</strong></p>\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>CONCAT(S1,S2,…Sn)</td>\n<td>字符串拼接，将S1，S2，… Sn拼接成一个字符串</td>\n</tr>\n<tr>\n<td>LOWER(str)</td>\n<td>将字符串str全部转为小写</td>\n</tr>\n<tr>\n<td>UPPER(str)</td>\n<td>将字符串str全部转为大写</td>\n</tr>\n<tr>\n<td>LPAD(str,n,pad)</td>\n<td>左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td>\n</tr>\n<tr>\n<td>RPAD(str,n,pad)</td>\n<td>右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</td>\n</tr>\n<tr>\n<td>TRIM(str)</td>\n<td>去掉字符串头部和尾部的空格</td>\n</tr>\n<tr>\n<td>SUBSTRING(str,start,len)</td>\n<td>返回从字符串str从start位置起的len个长度的字符串</td>\n</tr>\n</tbody></table>\n<p> concat : 字符串拼接</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> concat<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello'</span> <span class=\"token punctuation\">,</span> <span class=\"token string\">' MySQL'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>lpad : 左填充</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> lpad<span class=\"token punctuation\">(</span><span class=\"token string\">'01'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p> rpad : 右填充</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> rpad<span class=\"token punctuation\">(</span><span class=\"token string\">'01'</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token string\">'23456789'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 01234</span>\n<span class=\"token keyword\">select</span> rpad<span class=\"token punctuation\">(</span><span class=\"token string\">'01'</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token string\">'23'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 01232</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p> trim : 去除空格</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> trim<span class=\"token punctuation\">(</span><span class=\"token string\">' Hello MySQL '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 'Hello MySQL'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p> substring : 截取子字符串</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> substring<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello MySQL'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- Hello</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>案例：由于业务需求变更，企业员工的工号，统一为5位数，目前不足5位数的全部在前面补0。比如： 1号员工的工号应该为00001。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">update</span> workno <span class=\"token operator\">=</span> lpad<span class=\"token punctuation\">(</span>workno<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong>数值函数</strong></p>\n<table>\n<thead>\n<tr>\n<th><strong>函数</strong></th>\n<th><strong>功能</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>CEIL(x)</td>\n<td>向上取整</td>\n</tr>\n<tr>\n<td>FLOOR(x)</td>\n<td>向下取整</td>\n</tr>\n<tr>\n<td>MOD(x,y)</td>\n<td>返回x&#x2F;y的模</td>\n</tr>\n<tr>\n<td>RAND()</td>\n<td>返回0~1内的随机数</td>\n</tr>\n<tr>\n<td>ROUND(x,y)</td>\n<td>求参数x的四舍五入的值，保留y位小数</td>\n</tr>\n</tbody></table>\n<p> ceil：向上取整</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> ceil<span class=\"token punctuation\">(</span><span class=\"token number\">1.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p> floor：向下取整</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> floor<span class=\"token punctuation\">(</span><span class=\"token number\">1.9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>mod：取模</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p> rand：获取随机数</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> rand<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>round：四舍五入</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span><span class=\"token number\">2.344</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>小案例：通过数据库的函数，生成一个六位数的随机验证码。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> lpad<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span>substring<span class=\"token punctuation\">(</span>concat<span class=\"token punctuation\">(</span>rand<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> code<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong>日期函数</strong></p>\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>CURDATE()</td>\n<td>返回当前日期</td>\n</tr>\n<tr>\n<td>CURTIME()</td>\n<td>返回当前时间</td>\n</tr>\n<tr>\n<td>NOW()</td>\n<td>返回当前日期和时间</td>\n</tr>\n<tr>\n<td>YEAR(date)</td>\n<td>获取指定date的年份</td>\n</tr>\n<tr>\n<td>MONTH(date)</td>\n<td>获取指定date的月份</td>\n</tr>\n<tr>\n<td>DAY(date)</td>\n<td>获取指定date的日期</td>\n</tr>\n<tr>\n<td>DATE_ADD(date,INTERVAL expr type)</td>\n<td>返回一个日期&#x2F;时间值加上一个时间间隔expr后的时间值</td>\n</tr>\n<tr>\n<td>DATEDIFF(date1,date2)</td>\n<td>返回起始时间date1 和 结束时间date2之间的天数</td>\n</tr>\n</tbody></table>\n<p> curdate：当前日期</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">select curdate();<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p> curtime：当前时间</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">select curtime();<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p> now：当前日期和时间</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">select now();<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>YEAR , MONTH , DAY：当前年、月、日</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">select year(now());\nselect month(now());\nselect day(now());<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>date_add：增加指定的时间间隔</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> date_add<span class=\"token punctuation\">(</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">INTERVAL</span> <span class=\"token number\">70</span> <span class=\"token keyword\">YEAR</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">select</span> date_add<span class=\"token punctuation\">(</span><span class=\"token string\">'2023-05-16'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">INTERVAL</span> <span class=\"token number\">29</span> <span class=\"token keyword\">DAY</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p> datediff：获取两个日期相差的天数</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> datediff<span class=\"token punctuation\">(</span><span class=\"token string\">'2023-05-16'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2023-06-14'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>小案例：查询所有员工的入职天数，并根据入职天数倒序排序。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> name <span class=\"token punctuation\">,</span> datediff<span class=\"token punctuation\">(</span>curdate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> entrydate<span class=\"token punctuation\">)</span> workday <span class=\"token keyword\">from</span> emp <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> workday <span class=\"token keyword\">desc</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong>流程函数</strong></p>\n<p>流程函数也是很常用的一类函数，可以在SQL语句中实现条件筛选，从而提高语句的效率。</p>\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>IF(value, t, f)</td>\n<td>如果value为true，则返回t，否则返回f</td>\n</tr>\n<tr>\n<td>IFNULL(value1, value2)</td>\n<td>如果value1不为空，返回value1，否则返回value2</td>\n</tr>\n<tr>\n<td>CASE WHEN [vall] THEN [res1] … ELSE [default] END</td>\n<td>如果val1为true，返回res1，… 否则返回default默认值</td>\n</tr>\n<tr>\n<td>CASE [expr] WHEN [val1] THEN [res1] …  ELSE [default] END</td>\n<td>如果expr的值等于val1，返回res1，… 否则返回default默认值</td>\n</tr>\n</tbody></table>\n<p> if</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ok'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 默认的false值还有 0, '', null</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p> ifnull</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> ifnull<span class=\"token punctuation\">(</span><span class=\"token string\">'Ok'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Default'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">select</span> ifnull<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Default'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">select</span> ifnull<span class=\"token punctuation\">(</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Default'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">-- 只有null会被识别为空</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p> case when then else end</p>\n<p>查询emp表的员工姓名和工作地址 (北京&#x2F;上海   替换成   一线城市 , 其他   替换成   二线城市)</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> name<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">case</span> workaddress <span class=\"token keyword\">when</span> <span class=\"token string\">'北京'</span> <span class=\"token keyword\">then</span> <span class=\"token string\">'一线城市'</span> <span class=\"token keyword\">when</span> <span class=\"token string\">'上海'</span> <span class=\"token keyword\">then</span> <span class=\"token string\">'一线城市'</span> <span class=\"token keyword\">else</span> <span class=\"token string\">'二线城市'</span> <span class=\"token keyword\">end</span><span class=\"token punctuation\">)</span> <span class=\"token string\">'工作地点'</span> <span class=\"token keyword\">from</span> emp<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>案例：将学生的各个学科的成绩分等级展示，大于等于85 为优秀，(85，60]为及格，否则不及格</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> score<span class=\"token punctuation\">(</span>\nid <span class=\"token keyword\">int</span> <span class=\"token keyword\">comment</span> <span class=\"token string\">'ID'</span><span class=\"token punctuation\">,</span>\nname <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">comment</span> <span class=\"token string\">'姓名'</span><span class=\"token punctuation\">,</span>\nmath  <span class=\"token keyword\">tinyint</span> <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">comment</span> <span class=\"token string\">'数学'</span><span class=\"token punctuation\">,</span>\nenglish <span class=\"token keyword\">tinyint</span> <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">comment</span> <span class=\"token string\">'英语'</span><span class=\"token punctuation\">,</span>\nchinese <span class=\"token keyword\">tinyint</span> <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">comment</span> <span class=\"token string\">'语文'</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">comment</span> <span class=\"token string\">'学生成绩表'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> score<span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> math<span class=\"token punctuation\">,</span> english<span class=\"token punctuation\">,</span> chinese<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> \n<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Tom'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">67</span><span class=\"token punctuation\">,</span> <span class=\"token number\">88</span><span class=\"token punctuation\">,</span> <span class=\"token number\">95</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Rose'</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">66</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Jack'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">56</span><span class=\"token punctuation\">,</span> <span class=\"token number\">98</span><span class=\"token punctuation\">,</span> <span class=\"token number\">76</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n <span class=\"token keyword\">select</span> name <span class=\"token punctuation\">,</span> \n<span class=\"token punctuation\">(</span><span class=\"token keyword\">case</span> <span class=\"token keyword\">when</span> math <span class=\"token operator\">>=</span> <span class=\"token number\">85</span> <span class=\"token keyword\">then</span> <span class=\"token string\">'优秀'</span> <span class=\"token keyword\">when</span> math <span class=\"token operator\">>=</span><span class=\"token number\">60</span> <span class=\"token keyword\">then</span> <span class=\"token string\">'及格'</span> <span class=\"token keyword\">else</span> <span class=\"token string\">'不及格'</span> <span class=\"token keyword\">end</span> <span class=\"token punctuation\">)</span> math_score<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">case</span> <span class=\"token keyword\">when</span> english <span class=\"token operator\">>=</span> <span class=\"token number\">85</span> <span class=\"token keyword\">then</span> <span class=\"token string\">'优秀'</span> <span class=\"token keyword\">when</span> english <span class=\"token operator\">>=</span><span class=\"token number\">60</span> <span class=\"token keyword\">then</span> <span class=\"token string\">'及格'</span> <span class=\"token keyword\">else</span> <span class=\"token string\">'不及格'</span> <span class=\"token keyword\">end</span> <span class=\"token punctuation\">)</span> english_score<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">case</span> <span class=\"token keyword\">when</span> chinese <span class=\"token operator\">>=</span> <span class=\"token number\">85</span> <span class=\"token keyword\">then</span> <span class=\"token string\">'优秀'</span> <span class=\"token keyword\">when</span> chinese <span class=\"token operator\">>=</span><span class=\"token number\">60</span> <span class=\"token keyword\">then</span> <span class=\"token string\">'及格'</span> <span class=\"token keyword\">else</span> <span class=\"token string\">'不及格'</span> <span class=\"token keyword\">end</span> <span class=\"token punctuation\">)</span> chinese_score \n <span class=\"token keyword\">from</span> score<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","text":"DCLData Control Language(数据控制语言)，用来管理数据库用户、控制数据库的访问权限。 管理用户查询用户 select * from mysql.user; 其中 Host代表当前用户访问的主机, 如果为localhost, 仅代表只能够在当前本机访问，是不...","link":"","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"MySQL","slug":"MySQL","count":6,"path":"api/tags/MySQL.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#DCL\"><span class=\"toc-text\">DCL</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7\"><span class=\"toc-text\">管理用户</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">函数</span></a></li></ol></li></ol>","author":{"name":"大宝贝的程序员","slug":"blog-author","avatar":"/img/header.jpg","link":"/","description":"Java实习生,即将入职场的小白","socials":{"github":"https://github.com/hjllsh","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://mp.csdn.net/mp_blog/manage/article","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"MySQL_约束_多表查询","uid":"f293b2fcfae54b8509d50db2914ed7a0","slug":"MySQL-约束-多表联查","date":"2023-05-16T13:40:42.000Z","updated":"2023-05-17T13:50:48.431Z","comments":true,"path":"api/articles/MySQL-约束-多表联查.json","keywords":null,"cover":[],"text":"约束概念：约束是作用于表中字段上的规则，用于限制存储在表中的数据。 目的：保证数据库中数据的正确、有效性和完整性。 约束 描述 关键词 非空约束 限制该字段的数据不能为null NOT NULL 唯一约束 保证该字段的所有数据都是唯一、不重复的 UNIQUE 主键约束 主键是一行...","link":"","photos":[],"count_time":{"symbolsCount":"8.9k","symbolsTime":"8 mins."},"categories":[],"tags":[{"name":"MySQL","slug":"MySQL","count":6,"path":"api/tags/MySQL.json"}],"author":{"name":"大宝贝的程序员","slug":"blog-author","avatar":"/img/header.jpg","link":"/","description":"Java实习生,即将入职场的小白","socials":{"github":"https://github.com/hjllsh","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://mp.csdn.net/mp_blog/manage/article","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"状态模式","uid":"b886b366f3cb34006709f66f49ec6b62","slug":"状态模式","date":"2023-05-15T10:11:38.000Z","updated":"2023-05-15T11:53:16.531Z","comments":true,"path":"api/articles/状态模式.json","keywords":null,"cover":null,"text":"状态模式它将对象的行为与其内部状态分离开来，使得对象可以根据其内部状态的变化而改变其行为。状态模式通过将状态的切换封装在状态类中，使得状态转换具有可扩展性和灵活性，并避免了由于状态转换所带来的“if-else”嵌套过多的问题。 状态模式的基本机制是将状态抽象为一个接口或者抽象类，...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"Java","slug":"Java","count":25,"path":"api/tags/Java.json"},{"name":"设计模式","slug":"设计模式","count":17,"path":"api/tags/设计模式.json"}],"author":{"name":"大宝贝的程序员","slug":"blog-author","avatar":"/img/header.jpg","link":"/","description":"Java实习生,即将入职场的小白","socials":{"github":"https://github.com/hjllsh","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://mp.csdn.net/mp_blog/manage/article","juejin":"","customs":{}}}}}